<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="ftplib --- FTP 协议客户端" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/library/ftplib.xhtml" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="源代码： Lib/ftplib.py[https://github.com/python/cpython/tree/3.12/Lib/ftplib.py] 本模块定义了 FTP 类和一些相关项目。 FTP 类实现了 FTP 协议的客户端。 你可以用这个类来编写执行各种自动化 FTP 任务的 Python 程序，例如镜像其他 FTP 服务器等。 它还被 urllib.request 模块用来处..." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="源代码： Lib/ftplib.py[https://github.com/python/cpython/tree/3.12/Lib/ftplib.py] 本模块定义了 FTP 类和一些相关项目。 FTP 类实现了 FTP 协议的客户端。 你可以用这个类来编写执行各种自动化 FTP 任务的 Python 程序，例如镜像其他 FTP 服务器等。 它还被 urllib.request 模块用来处..." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>ftplib --- FTP 协议客户端</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/epub.css" />
    <link rel="canonical" href="https://docs.python.org/3/library/ftplib.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
 

  </head><body>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="module-ftplib">
<span id="ftplib-ftp-protocol-client"></span><h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">ftplib</span></code> --- FTP 协议客户端</h1>
<p><strong>源代码：</strong> <a class="reference external" href="https://github.com/python/cpython/tree/3.12/Lib/ftplib.py">Lib/ftplib.py</a><span class="link-target"> [https://github.com/python/cpython/tree/3.12/Lib/ftplib.py]</span></p>
<hr class="docutils" id="index-0" />
<p>本模块定义了 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 类和一些相关项目。 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 类实现了 FTP 协议的客户端。 你可以用这个类来编写执行各种自动化 FTP 任务的 Python 程序，例如镜像其他 FTP 服务器等。 它还被 <a class="reference internal" href="urllib.request.xhtml#module-urllib.request" title="urllib.request: Extensible library for opening URLs."><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib.request</span></code></a> 模块用来处理使用 FTP 的 URL。 有关 FTP (文件传输协议) 的更多信息，请参阅 <span class="target" id="index-13"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc959.html"><strong>RFC 959</strong></a><span class="link-target"> [https://datatracker.ietf.org/doc/html/rfc959.html]</span>。</p>
<p>默认编码为 UTF-8，遵循 <span class="target" id="index-14"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2640.html"><strong>RFC 2640</strong></a><span class="link-target"> [https://datatracker.ietf.org/doc/html/rfc2640.html]</span>。</p>
<div class="availability docutils container">
<p><a class="reference internal" href="intro.xhtml#availability"><span class="std std-ref">可用性</span></a>: 非 Emscripten，非 WASI。</p>
<p>此模块在 WebAssembly 平台 <code class="docutils literal notranslate"><span class="pre">wasm32-emscripten</span></code> 和 <code class="docutils literal notranslate"><span class="pre">wasm32-wasi</span></code> 上不适用或不可用。 请参阅 <a class="reference internal" href="intro.xhtml#wasm-availability"><span class="std std-ref">WebAssembly 平台</span></a> 了解详情。</p>
</div>
<p>以下是使用 <a class="reference internal" href="#module-ftplib" title="ftplib: FTP protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ftplib</span></code></a> 模块的会话示例:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ftplib</span> <span class="kn">import</span> <span class="n">FTP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftp</span> <span class="o">=</span> <span class="n">FTP</span><span class="p">(</span><span class="s1">&#39;ftp.us.debian.org&#39;</span><span class="p">)</span>  <span class="c1"># connect to host, default port</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftp</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>                     <span class="c1"># user anonymous, passwd anonymous@</span>
<span class="go">&#39;230 Login successful.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftp</span><span class="o">.</span><span class="n">cwd</span><span class="p">(</span><span class="s1">&#39;debian&#39;</span><span class="p">)</span>               <span class="c1"># change into &quot;debian&quot; directory</span>
<span class="go">&#39;250 Directory successfully changed.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftp</span><span class="o">.</span><span class="n">retrlines</span><span class="p">(</span><span class="s1">&#39;LIST&#39;</span><span class="p">)</span>           <span class="c1"># list directory contents</span>
<span class="go">-rw-rw-r--    1 1176     1176         1063 Jun 15 10:18 README</span>
<span class="go">...</span>
<span class="go">drwxr-sr-x    5 1176     1176         4096 Dec 19  2000 pool</span>
<span class="go">drwxr-sr-x    4 1176     1176         4096 Nov 17  2008 project</span>
<span class="go">drwxr-xr-x    3 1176     1176         4096 Oct 10  2012 tools</span>
<span class="go">&#39;226 Directory send OK.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;README&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">ftp</span><span class="o">.</span><span class="n">retrbinary</span><span class="p">(</span><span class="s1">&#39;RETR README&#39;</span><span class="p">,</span> <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">)</span>
<span class="go">&#39;226 Transfer complete.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftp</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
<span class="go">&#39;221 Goodbye.&#39;</span>
</pre></div>
</div>
<section id="reference">
<span id="ftplib-reference"></span><h2>参考</h2>
<section id="ftp-objects">
<span id="id1"></span><h3>FTP 对象</h3>
<dl class="py class">
<dt class="sig sig-object py" id="ftplib.FTP">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">FTP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passwd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'utf-8'</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>返回一个 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 类的新实例。</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- 要连接的主机名。 如果给出，则将由构造器隐式地调用 <code class="code docutils literal notranslate"><span class="pre">connect(host)</span></code>。</p></li>
<li><p><strong>user</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- 如果给出 The username to log in with (default: <code class="docutils literal notranslate"><span class="pre">'anonymous'</span></code>).，则将由构造器隐式地调用 <code class="code docutils literal notranslate"><span class="pre">login(host,</span> <span class="pre">passwd,</span> <span class="pre">acct)</span></code>。</p></li>
<li><p><strong>passwd</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- The password to use when logging in.
If not given, and if <em>passwd</em> is the empty string or <code class="docutils literal notranslate"><span class="pre">&quot;-&quot;</span></code>,
a password will be automatically generated.</p></li>
<li><p><strong>acct</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- Account information to be used for the <code class="docutils literal notranslate"><span class="pre">ACCT</span></code> FTP command.
Few systems implement this.
See <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc959.html">RFC-959</a><span class="link-target"> [https://datatracker.ietf.org/doc/html/rfc959.html]</span>
for more details.</p></li>
<li><p><strong>timeout</strong> (<a class="reference internal" href="functions.xhtml#float" title="float"><em>float</em></a><em> | </em><em>None</em>) -- 用于阻塞操作如 <a class="reference internal" href="#ftplib.FTP.connect" title="ftplib.FTP.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connect()</span></code></a> 的以秒数表示的超时值（默认：全局默认超时设置值）。</p></li>
<li><p><strong>source_address</strong> (<a class="reference internal" href="stdtypes.xhtml#tuple" title="tuple"><em>tuple</em></a><em> | </em><em>None</em>) -- A 2-tuple <code class="docutils literal notranslate"><span class="pre">(host,</span> <span class="pre">port)</span></code> for the socket to bind to as its
source address before connecting.</p></li>
<li><p><strong>encoding</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- The encoding for directories and filenames (default: <code class="docutils literal notranslate"><span class="pre">'utf-8'</span></code>).</p></li>
</ul>
</dd>
</dl>
<p><a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 类支持 <a class="reference internal" href="../reference/compound_stmts.xhtml#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> 语句，例如：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ftplib</span> <span class="kn">import</span> <span class="n">FTP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">FTP</span><span class="p">(</span><span class="s2">&quot;ftp1.at.proftpd.org&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ftp</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">ftp</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">ftp</span><span class="o">.</span><span class="n">dir</span><span class="p">()</span>
<span class="gp">... </span>
<span class="go">&#39;230 Anonymous login ok, restrictions apply.&#39;</span>
<span class="go">dr-xr-xr-x   9 ftp      ftp           154 May  6 10:43 .</span>
<span class="go">dr-xr-xr-x   9 ftp      ftp           154 May  6 10:43 ..</span>
<span class="go">dr-xr-xr-x   5 ftp      ftp          4096 May  6 10:43 CentOS</span>
<span class="go">dr-xr-xr-x   3 ftp      ftp            18 Jul 10  2008 Fedora</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.2 版本发生变更: </span>添加了对 <a class="reference internal" href="../reference/compound_stmts.xhtml#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> 语句的支持。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.3 版本发生变更: </span>添加了 <em>source_address</em> 参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.9 版本发生变更: </span>如果 <em>timeout</em> 参数设置为 0，创建非阻塞套接字时，它将引发 <a class="reference internal" href="exceptions.xhtml#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> 来阻止该操作。添加了 <em>encoding</em> 参数，且为了遵循 <span class="target" id="index-15"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2640.html"><strong>RFC 2640</strong></a><span class="link-target"> [https://datatracker.ietf.org/doc/html/rfc2640.html]</span>，该参数默认值从 Latin-1 改为了 UTF-8。</p>
</div>
<p>某些 <code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code> 方法有两种形式：一种用于处理文本文件而另一种用于二进制文件。 这些方法的名称与所用的命令相对应，文本版之后跟 <code class="docutils literal notranslate"><span class="pre">lines</span></code> 而二进制版之后跟 <code class="docutils literal notranslate"><span class="pre">binary</span></code>。</p>
<p><a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 实例具有下列方法:</p>
<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.set_debuglevel">
<span class="sig-name descname"><span class="pre">set_debuglevel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>将实例的调试级别设为一个 <a class="reference internal" href="functions.xhtml#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> 值。 这将控制所打印的调试输出数据量。 调试级别包括：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> (默认): 无调试输出。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code>: 产生中等的调试输出数据量，通常为每个请求一行。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code> 或更高: 产生最大的调试输出数据量，记录在控制连接中发送和接收的每一行。</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>连接到给定的主机和端口。 此函数应当只为每个实例调用一次；如果在创建 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 实例时给出了 <em>host</em> 参数则不应调用此函数。 所有其他 <code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code> 方法只能在连接成功建立之后被调用。</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- 要连接的主机。</p></li>
<li><p><strong>port</strong> (<a class="reference internal" href="functions.xhtml#int" title="int"><em>int</em></a>) -- 要连接的 TCP 端口 (默认值: <code class="docutils literal notranslate"><span class="pre">21</span></code>，如 FTP 协议规范所指明的)。 很少有必要指定不同的端口号。</p></li>
<li><p><strong>timeout</strong> (<a class="reference internal" href="functions.xhtml#float" title="float"><em>float</em></a><em> | </em><em>None</em>) -- 针对连接尝试的以秒数表示的超时值（默认值：全局默认超时设置值）。</p></li>
<li><p><strong>source_address</strong> (<a class="reference internal" href="stdtypes.xhtml#tuple" title="tuple"><em>tuple</em></a><em> | </em><em>None</em>) -- A 2-tuple <code class="docutils literal notranslate"><span class="pre">(host,</span> <span class="pre">port)</span></code> for the socket to bind to as its
source address before connecting.</p></li>
</ul>
</dd>
</dl>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.xhtml#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">ftplib.connect</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">host</span></code>, <code class="docutils literal notranslate"><span class="pre">port</span></code>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.3 版本发生变更: </span>添加了 <em>source_address</em> 参数。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.getwelcome">
<span class="sig-name descname"><span class="pre">getwelcome</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>返回服务器发送的欢迎消息，作为连接开始的回复。（该消息有时包含与用户有关的免责声明或帮助信息。）</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.login">
<span class="sig-name descname"><span class="pre">login</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'anonymous'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passwd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>登录到已连接的 FTP 服务器。 在建立连接后，此函数应当只为每个实例调用一次；如果在创建 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 实例时给出了 <em>host</em> 和 <em>user</em> 参数则不应调用该函数。 大多数 FTP 命令只有在客户端已登录后才允许使用。</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- The username to log in with (default: <code class="docutils literal notranslate"><span class="pre">'anonymous'</span></code>).</p></li>
<li><p><strong>passwd</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- The password to use when logging in.
If not given, and if <em>passwd</em> is the empty string or <code class="docutils literal notranslate"><span class="pre">&quot;-&quot;</span></code>,
a password will be automatically generated.</p></li>
<li><p><strong>acct</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- Account information to be used for the <code class="docutils literal notranslate"><span class="pre">ACCT</span></code> FTP command.
Few systems implement this.
See <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc959.html">RFC-959</a><span class="link-target"> [https://datatracker.ietf.org/doc/html/rfc959.html]</span>
for more details.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.abort">
<span class="sig-name descname"><span class="pre">abort</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>中止正在进行的文件传输。本方法并不总是有效，但值得一试。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.sendcmd">
<span class="sig-name descname"><span class="pre">sendcmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>将一条简单的命令字符串发送到服务器，返回响应的字符串。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.xhtml#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">ftplib.sendcmd</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">cmd</span></code>。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.voidcmd">
<span class="sig-name descname"><span class="pre">voidcmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>将一条简单的命令字符串发送到服务器并对响应进行处理。 如果响应代码对应执行成功（代码在 200--299 范围内）则返回响应字符串。 在其他情况下则引发 <a class="reference internal" href="#ftplib.error_reply" title="ftplib.error_reply"><code class="xref py py-exc docutils literal notranslate"><span class="pre">error_reply</span></code></a>。</p>
<p class="audit-hook">引发一个 <a class="reference internal" href="sys.xhtml#auditing"><span class="std std-ref">审计事件</span></a> <code class="docutils literal notranslate"><span class="pre">ftplib.sendcmd</span></code>，附带参数 <code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">cmd</span></code>。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.retrbinary">
<span class="sig-name descname"><span class="pre">retrbinary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8192</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>以二进制传输模式获取一个文件。</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- 一个正确的 <code class="docutils literal notranslate"><span class="pre">STOR</span></code> 命令: <code class="samp docutils literal notranslate"><span class="pre">&quot;STOR</span> <em><span class="pre">filename</span></em><span class="pre">&quot;</span></code>。</p></li>
<li><p><strong>callback</strong> (<a class="reference internal" href="../glossary.xhtml#term-callable"><span class="xref std std-term">callable</span></a>) -- 一个针对所接收的每个数据块被调用的单形参可调用对象，其唯一参数即 <a class="reference internal" href="stdtypes.xhtml#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 类型的数据。</p></li>
<li><p><strong>blocksize</strong> (<a class="reference internal" href="functions.xhtml#int" title="int"><em>int</em></a>) -- 在为进行实际传输而创建的底层 <a class="reference internal" href="socket.xhtml#socket.socket" title="socket.socket"><code class="xref py py-class docutils literal notranslate"><span class="pre">socket</span></code></a> 对象上读取的块尺寸最大值。 这也对应于将要传给 <em>callback</em> 的数据尺寸最大值。 默认为 <code class="docutils literal notranslate"><span class="pre">8192</span></code>。</p></li>
<li><p><strong>rest</strong> (<a class="reference internal" href="functions.xhtml#int" title="int"><em>int</em></a>) -- 要发送给服务器的 <code class="docutils literal notranslate"><span class="pre">REST</span></code> 命令。 参见 <a class="reference internal" href="#ftplib.FTP.transfercmd" title="ftplib.FTP.transfercmd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transfercmd()</span></code></a> 方法的 <em>rest</em> 形参的文档。</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.retrlines">
<span class="sig-name descname"><span class="pre">retrlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>以在初始化时由 <em>encoding</em> 形参指定的编码格式获取文件或目录列表。 <em>cmd</em> 应为一个适当的 <code class="docutils literal notranslate"><span class="pre">RETR</span></code> 命令 (参见 <a class="reference internal" href="#ftplib.FTP.retrbinary" title="ftplib.FTP.retrbinary"><code class="xref py py-meth docutils literal notranslate"><span class="pre">retrbinary()</span></code></a>) 或是像 <code class="docutils literal notranslate"><span class="pre">LIST</span></code> 或 <code class="docutils literal notranslate"><span class="pre">NLST</span></code> 这样的命令 (通常即字符串 <code class="docutils literal notranslate"><span class="pre">'LIST'</span></code>)。 <code class="docutils literal notranslate"><span class="pre">LIST</span></code> 将获取一个包含文件名及文件相关信息的列表。 <code class="docutils literal notranslate"><span class="pre">NLST</span></code> 将获取一个文件名的列表。 <em>callback</em> 函数将针对每一行被调用并附带一个包含去除了末尾 CRLF 的行的字符串参数。 默认的 <em>callback</em> 会将行内容打印到 <a class="reference internal" href="sys.xhtml#sys.stdout" title="sys.stdout"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a>。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.set_pasv">
<span class="sig-name descname"><span class="pre">set_pasv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>如果 <em>val</em> 为 true，则打开“被动”模式，否则禁用被动模式。默认下被动模式是打开的。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.storbinary">
<span class="sig-name descname"><span class="pre">storbinary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8192</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>以二进制传输模式存储一个文件。</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- 一个正确的 <code class="docutils literal notranslate"><span class="pre">STOR</span></code> 命令: <code class="samp docutils literal notranslate"><span class="pre">&quot;STOR</span> <em><span class="pre">filename</span></em><span class="pre">&quot;</span></code>。</p></li>
<li><p><strong>fp</strong> (<a class="reference internal" href="../glossary.xhtml#term-file-object"><span class="xref std std-term">file object</span></a>) -- 一个被读取直至 EOF 的文件对象（以二进制模式打开），使用其 <a class="reference internal" href="io.xhtml#io.RawIOBase.read" title="io.RawIOBase.read"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code></a> 方法以大小为 <em>blocksize</em> 的块来提供要存储的数据。</p></li>
<li><p><strong>blocksize</strong> (<a class="reference internal" href="functions.xhtml#int" title="int"><em>int</em></a>) -- 读取块的大小。 默认为 <code class="docutils literal notranslate"><span class="pre">8192</span></code>。</p></li>
<li><p><strong>callback</strong> (<a class="reference internal" href="../glossary.xhtml#term-callable"><span class="xref std std-term">callable</span></a>) -- 一个针对所发送的每个数据块被调用的单形参可调用对象，其唯一参数即 <a class="reference internal" href="stdtypes.xhtml#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 类型的数据。</p></li>
<li><p><strong>rest</strong> (<a class="reference internal" href="functions.xhtml#int" title="int"><em>int</em></a>) -- 要发送给服务器的 <code class="docutils literal notranslate"><span class="pre">REST</span></code> 命令。 参见 <a class="reference internal" href="#ftplib.FTP.transfercmd" title="ftplib.FTP.transfercmd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transfercmd()</span></code></a> 方法的 <em>rest</em> 形参的文档。</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.2 版本发生变更: </span>增加了 <em>rest</em> 形参。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.storlines">
<span class="sig-name descname"><span class="pre">storlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>以文本行模式存储文件。<em>cmd</em> 应为恰当的 <code class="docutils literal notranslate"><span class="pre">STOR</span></code> 命令 (请参阅 <a class="reference internal" href="#ftplib.FTP.storbinary" title="ftplib.FTP.storbinary"><code class="xref py py-meth docutils literal notranslate"><span class="pre">storbinary()</span></code></a>)。 <em>fp</em> 是一个 <a class="reference internal" href="../glossary.xhtml#term-file-object"><span class="xref std std-term">文件对象</span></a> (以二进制模式打开)，将使用它的 <a class="reference internal" href="io.xhtml#io.IOBase.readline" title="io.IOBase.readline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">readline()</span></code></a> 方法读取它的每一行，用于提供要存储的数据，直到遇到 EOF。 可选参数 <em>callback</em> 是单参数函数，在每行发送后都会以该行作为参数来调用它。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.transfercmd">
<span class="sig-name descname"><span class="pre">transfercmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>在 FTP 数据连接上开始传输数据。如果传输处于活动状态，传输命令由 <em>cmd</em> 指定，需发送 <code class="docutils literal notranslate"><span class="pre">EPRT</span></code> 或 <code class="docutils literal notranslate"><span class="pre">PORT</span></code> 命令，然后接受连接 (accept)。如果服务器是被动服务器，需发送 <code class="docutils literal notranslate"><span class="pre">EPSV</span></code> 或 <code class="docutils literal notranslate"><span class="pre">PASV</span></code> 命令，连接到服务器 (connect)，然后启动传输命令。两种方式都将返回用于连接的套接字。</p>
<p>如果传入了可选参数 <em>rest</em>，则一条 <code class="docutils literal notranslate"><span class="pre">REST</span></code> 命令会被发送到服务器，并以 <em>rest</em> 作为参数。<em>rest</em> 通常表示请求文件中的字节偏移量，它告诉服务器重新开始发送文件的字节，从请求的偏移量处开始，跳过起始字节。但是请注意，<a class="reference internal" href="#ftplib.FTP.transfercmd" title="ftplib.FTP.transfercmd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transfercmd()</span></code></a> 方法会将 <em>rest</em> 转换为字符串，但是不检查字符串的内容，转换用的编码是在初始化时指定的 <em>encoding</em> 参数。如果服务器无法识别 <code class="docutils literal notranslate"><span class="pre">REST</span></code> 命令，将引发 <a class="reference internal" href="#ftplib.error_reply" title="ftplib.error_reply"><code class="xref py py-exc docutils literal notranslate"><span class="pre">error_reply</span></code></a> 异常。如果发生这种情况，只需不带 <em>rest</em> 参数调用 <a class="reference internal" href="#ftplib.FTP.transfercmd" title="ftplib.FTP.transfercmd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transfercmd()</span></code></a>。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.ntransfercmd">
<span class="sig-name descname"><span class="pre">ntransfercmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>类似于 <a class="reference internal" href="#ftplib.FTP.transfercmd" title="ftplib.FTP.transfercmd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transfercmd()</span></code></a>，但返回一个元组，包括数据连接和数据的预计大小。如果预计大小无法计算，则返回的预计大小为 <code class="docutils literal notranslate"><span class="pre">None</span></code>。<em>cmd</em> 和 <em>rest</em> 的含义与 <a class="reference internal" href="#ftplib.FTP.transfercmd" title="ftplib.FTP.transfercmd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transfercmd()</span></code></a> 中的相同。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.mlsd">
<span class="sig-name descname"><span class="pre">mlsd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>使用 <code class="docutils literal notranslate"><span class="pre">MLSD</span></code> 命令以标准格式列出目录内容 (<span class="target" id="index-16"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3659.html"><strong>RFC 3659</strong></a><span class="link-target"> [https://datatracker.ietf.org/doc/html/rfc3659.html]</span>)。如果省略 <em>path</em> 则使用当前目录。<em>facts</em> 是字符串列表，表示所需的信息类型（如 <code class="docutils literal notranslate"><span class="pre">[&quot;type&quot;,</span> <span class="pre">&quot;size&quot;,</span> <span class="pre">&quot;perm&quot;]</span></code>）。返回一个生成器对象，每个在 path 中找到的文件都将在该对象中生成两个元素的元组。第一个元素是文件名，第二个元素是该文件的 facts 的字典。该字典的内容受 <em>facts</em> 参数限制，但不能保证服务器会返回所有请求的 facts。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.3.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.nlst">
<span class="sig-name descname"><span class="pre">nlst</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argument</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">...</span></span></em><span class="optional">]</span><span class="sig-paren">)</span></dt>
<dd><p>返回一个文件名列表，文件名由 <code class="docutils literal notranslate"><span class="pre">NLST</span></code> 命令返回。可选参数 <em>argument</em> 是待列出的目录（默认为当前服务器目录）。可以使用多个参数，将非标准选项传递给 <code class="docutils literal notranslate"><span class="pre">NLST</span></code> 命令。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>如果目标服务器支持相关命令，那么 <a class="reference internal" href="#ftplib.FTP.mlsd" title="ftplib.FTP.mlsd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mlsd()</span></code></a> 提供的 API 更好。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.dir">
<span class="sig-name descname"><span class="pre">dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argument</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">...</span></span></em><span class="optional">]</span><span class="sig-paren">)</span></dt>
<dd><p>生成一个目录列表即 <code class="docutils literal notranslate"><span class="pre">LIST</span></code> 命令所返回的结果，将其打印到标准输出。 可选的 <em>argument</em> 是要列出的目录（默认为当前服务器目录）。 可以使用多个参数将非标准选项传给 <code class="docutils literal notranslate"><span class="pre">LIST</span></code> 命令。 如果最后一个参数是个函数，它将被用作 <em>callback</em> 函数，与 <a class="reference internal" href="#ftplib.FTP.retrlines" title="ftplib.FTP.retrlines"><code class="xref py py-meth docutils literal notranslate"><span class="pre">retrlines()</span></code></a> 的类似；默认将打印到 <a class="reference internal" href="sys.xhtml#sys.stdout" title="sys.stdout"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a>。 此方法将返回 <code class="docutils literal notranslate"><span class="pre">None</span></code>。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>如果目标服务器支持相关命令，那么 <a class="reference internal" href="#ftplib.FTP.mlsd" title="ftplib.FTP.mlsd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mlsd()</span></code></a> 提供的 API 更好。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.rename">
<span class="sig-name descname"><span class="pre">rename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fromname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">toname</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>将服务器上的文件 <em>fromname</em> 重命名为 <em>toname</em>。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>将服务器上名为 <em>filename</em> 的文件删除。如果删除成功，返回响应文本，如果删除失败，在权限错误时引发 <a class="reference internal" href="#ftplib.error_perm" title="ftplib.error_perm"><code class="xref py py-exc docutils literal notranslate"><span class="pre">error_perm</span></code></a>，在其他错误时引发 <a class="reference internal" href="#ftplib.error_reply" title="ftplib.error_reply"><code class="xref py py-exc docutils literal notranslate"><span class="pre">error_reply</span></code></a>。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.cwd">
<span class="sig-name descname"><span class="pre">cwd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathname</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>设置服务器端的当前目录。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.mkd">
<span class="sig-name descname"><span class="pre">mkd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathname</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>在服务器上创建一个新目录。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.pwd">
<span class="sig-name descname"><span class="pre">pwd</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>返回服务器上当前目录的路径。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.rmd">
<span class="sig-name descname"><span class="pre">rmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>将服务器上名为 <em>dirname</em> 的目录删除。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.size">
<span class="sig-name descname"><span class="pre">size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>请求服务器上名为 <em>filename</em> 的文件大小。成功后以整数返回文件大小，未成功则返回 <code class="docutils literal notranslate"><span class="pre">None</span></code>。注意，<code class="docutils literal notranslate"><span class="pre">SIZE</span></code> 不是标准命令，但通常许多服务器的实现都支持该命令。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.quit">
<span class="sig-name descname"><span class="pre">quit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>向服务器发送 <code class="docutils literal notranslate"><span class="pre">QUIT</span></code> 命令并关闭连接。 这是关闭一个连接的“礼貌”方式，但是如果服务器对 <code class="docutils literal notranslate"><span class="pre">QUIT</span></code> 命令的响应带有错误消息则这会引发一个异常。 这意味着对 <a class="reference internal" href="#ftplib.FTP.close" title="ftplib.FTP.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> 方法的调用，它将使得 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 实例对后继调用无效（见下文）。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>单方面关闭连接。 这不该被应用于已经关闭的连接，例如成功调用 <a class="reference internal" href="#ftplib.FTP.quit" title="ftplib.FTP.quit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">quit()</span></code></a> 之后的连接。 在此调用之后 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 实例不应被继续使用（在调用 <a class="reference internal" href="#ftplib.FTP.close" title="ftplib.FTP.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> 或 <a class="reference internal" href="#ftplib.FTP.quit" title="ftplib.FTP.quit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">quit()</span></code></a> 之后你不能通过再次发起调用 <a class="reference internal" href="#ftplib.FTP.login" title="ftplib.FTP.login"><code class="xref py py-meth docutils literal notranslate"><span class="pre">login()</span></code></a> 方法重新打开连接）。</p>
</dd></dl>

</dd></dl>

</section>
<section id="ftp-tls-objects">
<h3>FTP_TLS 对象</h3>
<dl class="py class">
<dt class="sig sig-object py" id="ftplib.FTP_TLS">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">FTP_TLS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passwd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'utf-8'</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>一个为 FTP 添加如 <span class="target" id="index-17"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc4217.html"><strong>RFC 4217</strong></a><span class="link-target"> [https://datatracker.ietf.org/doc/html/rfc4217.html]</span> 所描述的 TLS 支持的 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 的子类。 连接到 21 端口在身份验证之前隐式地确保 FTP 控制连接的安全。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>用户必须通过调用 <a class="reference internal" href="#ftplib.FTP_TLS.prot_p" title="ftplib.FTP_TLS.prot_p"><code class="xref py py-meth docutils literal notranslate"><span class="pre">prot_p()</span></code></a> 方法显式地确保数据连接的安全。</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- 要连接的主机名。 如果给出，则将由构造器隐式地调用 <code class="code docutils literal notranslate"><span class="pre">connect(host)</span></code>。</p></li>
<li><p><strong>user</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- 如果给出 The username to log in with (default: <code class="docutils literal notranslate"><span class="pre">'anonymous'</span></code>).，则将由构造器隐式地调用 <code class="code docutils literal notranslate"><span class="pre">login(host,</span> <span class="pre">passwd,</span> <span class="pre">acct)</span></code>。</p></li>
<li><p><strong>passwd</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- The password to use when logging in.
If not given, and if <em>passwd</em> is the empty string or <code class="docutils literal notranslate"><span class="pre">&quot;-&quot;</span></code>,
a password will be automatically generated.</p></li>
<li><p><strong>acct</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- Account information to be used for the <code class="docutils literal notranslate"><span class="pre">ACCT</span></code> FTP command.
Few systems implement this.
See <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc959.html">RFC-959</a><span class="link-target"> [https://datatracker.ietf.org/doc/html/rfc959.html]</span>
for more details.</p></li>
<li><p><strong>context</strong> (<a class="reference internal" href="ssl.xhtml#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code></a>) -- 一个允许将 SSL 配置选项、证书和私钥打包至一个单独的、可以长久存在的结构体中的 SSL 上下文对象。 请参阅 <a class="reference internal" href="ssl.xhtml#ssl-security"><span class="std std-ref">安全考量</span></a> 了解相关的最佳实践。</p></li>
<li><p><strong>timeout</strong> (<a class="reference internal" href="functions.xhtml#float" title="float"><em>float</em></a><em> | </em><em>None</em>) -- 一个用于阻塞操作如 <a class="reference internal" href="#ftplib.FTP.connect" title="ftplib.FTP.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connect()</span></code></a> 的以秒数表示的超时值（默认值：全局默认超时设置）。</p></li>
<li><p><strong>source_address</strong> (<a class="reference internal" href="stdtypes.xhtml#tuple" title="tuple"><em>tuple</em></a><em> | </em><em>None</em>) -- A 2-tuple <code class="docutils literal notranslate"><span class="pre">(host,</span> <span class="pre">port)</span></code> for the socket to bind to as its
source address before connecting.</p></li>
<li><p><strong>encoding</strong> (<a class="reference internal" href="stdtypes.xhtml#str" title="str"><em>str</em></a>) -- The encoding for directories and filenames (default: <code class="docutils literal notranslate"><span class="pre">'utf-8'</span></code>).</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.2.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.3 版本发生变更: </span>增加了 <em>source_address</em> 形参。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.4 版本发生变更: </span>该类现在支持使用 <a class="reference internal" href="ssl.xhtml#ssl.SSLContext.check_hostname" title="ssl.SSLContext.check_hostname"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ssl.SSLContext.check_hostname</span></code></a> 和 <em>服务器名称提示</em> (参见 <a class="reference internal" href="ssl.xhtml#ssl.HAS_SNI" title="ssl.HAS_SNI"><code class="xref py py-const docutils literal notranslate"><span class="pre">ssl.HAS_SNI</span></code></a>) 进行主机名检测。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.9 版本发生变更: </span>如果 <em>timeout</em> 参数设置为 0，创建非阻塞套接字时，它将引发 <a class="reference internal" href="exceptions.xhtml#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> 来阻止该操作。添加了 <em>encoding</em> 参数，且为了遵循 <span class="target" id="index-18"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2640.html"><strong>RFC 2640</strong></a><span class="link-target"> [https://datatracker.ietf.org/doc/html/rfc2640.html]</span>，该参数默认值从 Latin-1 改为了 UTF-8。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.12 版本发生变更: </span>已弃用的 <em>keyfile</em> 和 <em>certfile</em> 形参已被移除。</p>
</div>
<p>以下是使用 <a class="reference internal" href="#ftplib.FTP_TLS" title="ftplib.FTP_TLS"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP_TLS</span></code></a> 类的会话示例:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ftps</span> <span class="o">=</span> <span class="n">FTP_TLS</span><span class="p">(</span><span class="s1">&#39;ftp.pureftpd.org&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftps</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="go">&#39;230 Anonymous user logged in&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftps</span><span class="o">.</span><span class="n">prot_p</span><span class="p">()</span>
<span class="go">&#39;200 Data protection level set to &quot;private&quot;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ftps</span><span class="o">.</span><span class="n">nlst</span><span class="p">()</span>
<span class="go">[&#39;6jack&#39;, &#39;OpenBSD&#39;, &#39;antilink&#39;, &#39;blogbench&#39;, &#39;bsdcam&#39;, &#39;clockspeed&#39;, &#39;djbdns-jedi&#39;, &#39;docs&#39;, &#39;eaccelerator-jedi&#39;, &#39;favicon.ico&#39;, &#39;francotone&#39;, &#39;fugu&#39;, &#39;ignore&#39;, &#39;libpuzzle&#39;, &#39;metalog&#39;, &#39;minidentd&#39;, &#39;misc&#39;, &#39;mysql-udf-global-user-variables&#39;, &#39;php-jenkins-hash&#39;, &#39;php-skein-hash&#39;, &#39;php-webdav&#39;, &#39;phpaudit&#39;, &#39;phpbench&#39;, &#39;pincaster&#39;, &#39;ping&#39;, &#39;posto&#39;, &#39;pub&#39;, &#39;public&#39;, &#39;public_keys&#39;, &#39;pure-ftpd&#39;, &#39;qscan&#39;, &#39;qtc&#39;, &#39;sharedance&#39;, &#39;skycache&#39;, &#39;sound&#39;, &#39;tmp&#39;, &#39;ucarp&#39;]</span>
</pre></div>
</div>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP_TLS</span></code> 类继承自 <a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a>，它定义了下列额外方法和属性：</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ftplib.FTP_TLS.ssl_version">
<span class="sig-name descname"><span class="pre">ssl_version</span></span></dt>
<dd><p>要使用的 SSL 版本 (默认为 <a class="reference internal" href="ssl.xhtml#ssl.PROTOCOL_SSLv23" title="ssl.PROTOCOL_SSLv23"><code class="xref py py-data docutils literal notranslate"><span class="pre">ssl.PROTOCOL_SSLv23</span></code></a>)。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP_TLS.auth">
<span class="sig-name descname"><span class="pre">auth</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>通过使用 TLS 或 SSL 来设置一个安全控制连接，具体取决于 <a class="reference internal" href="#ftplib.FTP_TLS.ssl_version" title="ftplib.FTP_TLS.ssl_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ssl_version</span></code></a> 属性是如何设置的。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.4 版本发生变更: </span>该方法现在支持使用 <a class="reference internal" href="ssl.xhtml#ssl.SSLContext.check_hostname" title="ssl.SSLContext.check_hostname"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ssl.SSLContext.check_hostname</span></code></a> 和 <em>服务器名称提示</em> (参见 <a class="reference internal" href="ssl.xhtml#ssl.HAS_SNI" title="ssl.HAS_SNI"><code class="xref py py-const docutils literal notranslate"><span class="pre">ssl.HAS_SNI</span></code></a>) 进行主机名称检测。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP_TLS.ccc">
<span class="sig-name descname"><span class="pre">ccc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>将控制通道回复为纯文本。 这适用于发挥知道如何使用非安全 FTP 处理 NAT 而无需打开固定端口的防火墙的优势。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.3.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP_TLS.prot_p">
<span class="sig-name descname"><span class="pre">prot_p</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>设置加密数据连接。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ftplib.FTP_TLS.prot_c">
<span class="sig-name descname"><span class="pre">prot_c</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>设置明文数据连接。</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-variables">
<h3>模块变量</h3>
<dl class="py exception">
<dt class="sig sig-object py" id="ftplib.error_reply">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">error_reply</span></span></dt>
<dd><p>从服务器收到意外答复时，将引发本异常。</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ftplib.error_temp">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">error_temp</span></span></dt>
<dd><p>收到表示临时错误的错误代码（响应代码在 400--499 范围内）时，将引发本异常。</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ftplib.error_perm">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">error_perm</span></span></dt>
<dd><p>收到表示永久性错误的错误代码（响应代码在 500--599 范围内）时，将引发本异常。</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ftplib.error_proto">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">error_proto</span></span></dt>
<dd><p>从服务器收到不符合 FTP 响应规范的答复，比如以数字 1--5 开头时，将引发本异常。</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="ftplib.all_errors">
<span class="sig-prename descclassname"><span class="pre">ftplib.</span></span><span class="sig-name descname"><span class="pre">all_errors</span></span></dt>
<dd><p>所有异常的集合（一个元组），由于 FTP 连接出现问题（并非调用者的编码错误），<a class="reference internal" href="#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> 实例的方法可能会引发这些异常。该集合包括上面列出的四个异常以及 <a class="reference internal" href="exceptions.xhtml#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> 和 <a class="reference internal" href="exceptions.xhtml#EOFError" title="EOFError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">EOFError</span></code></a>。</p>
</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">参见</p>
<dl class="simple">
<dt><a class="reference internal" href="netrc.xhtml#module-netrc" title="netrc: Loading of .netrc files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">netrc</span></code></a> 模块</dt><dd><p><code class="file docutils literal notranslate"><span class="pre">.netrc</span></code> 文件格式解析器。FTP 客户端在响应用户之前，通常使用 <code class="file docutils literal notranslate"><span class="pre">.netrc</span></code> 文件来加载用户认证信息。</p>
</dd>
</dl>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>